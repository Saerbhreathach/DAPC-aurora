<?xml version="1.0" encoding="utf-8" ?>
<elements>
	<info>
		<update version="3.1">
			<file name="fighter-blood-knight.xml" url="https://raw.githubusercontent.com/Saerbhreathach/DAPC-aurora/main/dark-arts-players-companion/fighter-blood-knight.xml" />
		</update>
	</info>

	<!-- Battle Master Archetype -->
	<element name="Blood Knight" type="Archetype" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FIGHTER_BLOOD_KNIGHT">
		<supports>Martial Archetype</supports>
		<description>
			<p>The archetypal Blood Knight employs their own flesh and blood in the slaughter of their enemies. To a Blood Knight, battle is everything. It isn’t winning or losing that drives them so much as it is the opportunity for a good fight. And when they find that fight, they use everything they have to contest their opponent. They utilize blood sacrifices to cast spells and grant themselves additional offensive and defensive capabilities, though at a steep cost.</p>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_HEMOMANCY"/>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOOD_WELL"/>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_DEATHSEEKER"/>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_IMPROVED_BLOOD_WELL"/>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOODRUSH"/>
			<div element="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_STRENGTH_OF_THE_WOUNDED"/>
		</description>
		<sheet display="false">
			<description>Those who emulate the archetypal Battle Master employ martial techniques passed down through generations.</description>
		</sheet>
		<rules>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_HEMOMANCY" level="3"/>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOOD_WELL" level="3"/>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_DEATHSEEKER" level="7"/>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_IMPROVED_BLOOD_WELL" level="10"/>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOODRUSH" level="15"/>
			<grant type="Archetype Feature" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_STRENGTH_OF_THE_WOUNDED" level="18"/>
		</rules>
	</element>

	<!--Blood Knight Spell List considerations-->
	<append id="ID_DAPC_SPELL_ANIMATE_BLOOD">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLACKBLOOD">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLOODBURN">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLOODCURSE">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLOODLETTING">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLOOD_SEAL">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_BLOODSIGHT">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_CRUORWHIP">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_DRAINING_THREAD">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_DRAIN_LIFE">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_HEMOPLAGUE">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_ICHOROUS_SMITE">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_MEMENTO_MORI">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_RAIN_OF_BLOOD">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_SANGUINE_ROPE">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_SANGUINE_SANCTUM">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_TIDES_OF_BLOOD">
		<supports>Blood Knight</supports>
	</append>
	<append id="ID_DAPC_SPELL_VAMPIRES_KISS">
		<supports>Blood Knight</supports>
	</append>
	<!--End Blood Knight Spell List-->

	<element name="Hemomancy" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_HEMOMANCY">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_HEMOMANCY</requirements>
		<description>
			<p>Beginning when you choose this archetype at 3rd level, you gain the ability to cast hemomancy spells, detailed in chapter 3 of this companion.</p>
			<p class="indent"><strong><em>Spell Slots.</em></strong> The Blood Knight table shows how many spell slots you have. The table also shows what the level of those slots is; all of your spell slots are the same level. To cast one of your spells of 1st level or higher, you must expend a spell slot. You regain all expended spell slots when you finish a long rest.</p>
			<p class="indent">During a short rest, you can choose to regain one of your blood knight spell slots. Once you do so, you can’t do so again until you finish a long rest.</p>
			<p class="indent"><strong><em>Spells Known of 1st-Level and Higher.</em></strong> You know two 1st-level hemomancy spells of your choice, chosen from the hemomancy spells detailed in chapter 3.</p>
			<p class="indent">The Spells Known column of the Blood Knight Spellcasting table shows when you learn more hemomancy spells of 1st level or higher. For instance, when you reach 7th level in this class, you can learn one new spell of 1st or 2nd level.</p>
			<p class="indent">Whenever you gain a level in this class, you can replace one of the hemomancy spells you know with another hemomancy spell of your choice. The new spell must be of a level for which you have spell slots.</p>
			<p class="indent"><strong><em>Spellcasting Ability.</em></strong> Constitution is your spellcasting ability for your blood knight spells, since your spells are powered through the resilience of your body. You use your Constitution whenever a spell refers to your spellcasting ability. In addition, you use your Constitution modifier when setting the saving throw DC for a blood knight spell you cast and when making an attack roll with one.</p>
			<center>
				<p><strong>Spell save DC</strong> = 8 + your proficiency bonus + your Constitution modifier</p>
				<p><strong>Spell attack modifier</strong> = your proficiency bonus + your Constitution modifier</p>
			</center>
			<h5 class="caption">BLOOD KNIGHT SPELLCASTING</h5>
			<table class="class-features">
				<thead>
					<tr><td class="col-10">Fighter Level</td><td class="col-10">Spells Known</td><td class="col-10">Spell Slots</td><td class="col-10">Slot Level</td></tr>
				</thead>
				<tr><td> 3rd</td><td>2</td><td>1</td><td>1st</td></tr>
				<tr><td> 4th</td><td>2</td><td>1</td><td>1st</td></tr>
				<tr><td> 5th</td><td>2</td><td>2</td><td>1st</td></tr>
				<tr><td> 6th</td><td>2</td><td>2</td><td>1st</td></tr>
				<tr><td> 7th</td><td>3</td><td>2</td><td>2nd</td></tr>
				<tr><td> 8th</td><td>3</td><td>2</td><td>2nd</td></tr>
				<tr><td> 9th</td><td>3</td><td>2</td><td>2nd</td></tr>
				<tr><td>10th</td><td>4</td><td>2</td><td>2nd</td></tr>
				<tr><td>11th</td><td>4</td><td>2</td><td>2nd</td></tr>
				<tr><td>12th</td><td>4</td><td>2</td><td>2nd</td></tr>
				<tr><td>13th</td><td>5</td><td>2</td><td>3rd</td></tr>
				<tr><td>14th</td><td>5</td><td>2</td><td>3rd</td></tr>
				<tr><td>15th</td><td>5</td><td>2</td><td>3rd</td></tr>
				<tr><td>16th</td><td>6</td><td>2</td><td>3rd</td></tr>
				<tr><td>17th</td><td>6</td><td>3</td><td>3rd</td></tr>
				<tr><td>18th</td><td>6</td><td>3</td><td>3rd</td></tr>
				<tr><td>19th</td><td>7</td><td>3</td><td>4th</td></tr>
				<tr><td>20th</td><td>7</td><td>3</td><td>4th</td></tr>
			</table>
		</description>
		<sheet display="false">
			<description>You augment your martial prowess with the powers of your own flesh and blood.</description>
		</sheet>
		<spellcasting name="Blood Knight" ability="Constitution" allowReplace="true">
			<list>Blood Knight</list>
		</spellcasting>
		<rules>
			<!-- add not full but single _not counting as multiclass spellcaster due to pact magic -->
			<grant type="Grants" id="ID_INTERNAL_GRANT_MULTICLASS_SPELLCASTING_SLOTS_SOLO" requirements="ID_INTERNAL_GRANT_MULTICLASS"/>

			<stat name="blood knight:spellcasting:slots:count" value="1" level="3"/>
			<stat name="blood knight:spellcasting:slots:count" value="1" level="5"/>
			<stat name="blood knight:spellcasting:slots:count" value="1" level="17"/>

			<stat name="blood knight:spellcasting:slot" value="1" level="3" />
			<stat name="blood knight:spellcasting:slot" value="1" level="7" />
			<stat name="blood knight:spellcasting:slot" value="1" level="13" />
			<stat name="blood knight:spellcasting:slot" value="1" level="19" />

			<!-- negative count to remove slots -->
			<stat name="blood knight:spellcasting:slots:1" value="blood knight:spellcasting:slots:count" level="3" />
			<stat name="blood knight:spellcasting:slots:1" value="-blood knight:spellcasting:slots:count" level="7" />
			<stat name="blood knight:spellcasting:slots:2" value="blood knight:spellcasting:slots:count" level="7" />
			<stat name="blood knight:spellcasting:slots:2" value="-blood knight:spellcasting:slots:count" level="13" />
			<stat name="blood knight:spellcasting:slots:3" value="blood knight:spellcasting:slots:count" level="13" />
			<stat name="blood knight:spellcasting:slots:3" value="-blood knight:spellcasting:slots:count" level="19" />
			<stat name="blood knight:spellcasting:slots:4" value="blood knight:spellcasting:slots:count" level="19" />

			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="3" number="2" spellcasting="Blood Knight"/>
			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="7" spellcasting="Blood Knight"/>
			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="10" spellcasting="Blood Knight"/>
			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="13" spellcasting="Blood Knight"/>
			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="16" spellcasting="Blood Knight"/>
			<select type="Spell" name="Hemomancy (Blood Knight)" supports="$(spellcasting:list),$(spellcasting:slots)" level="19" spellcasting="Blood Knight"/>
		</rules>
	</element>

	<element name="Blood Well" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOOD_WELL">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_BLOOD_WELL</requirements>
		<description>
			<p>Also at 3rd level, you gain a well of blood magic that is fueled through special dice called blood dice.</p>
			<p class="indent"><strong><em>Blood Dice.</em></strong> You have two blood dice, which are d6s. A blood die is expended when you use it. You regain all of your expended blood dice when you finish a short or long rest</p>
			<p class="indent">You gain an additional blood die at 7th, 10th, and 15th levels.</p>
			<p class="indent"><strong><em>Using Blood Dice.</em></strong> Blood dice can be utilized in two ways. 
			As a bonus action, you can expend a blood die and regain a number of hit points equal to the number rolled. 
			Also, when you hit a creature with an attack, you can choose to expend a blood die and add the number rolled to the attack’s damage roll. 
			If you do so, the attack counts as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage.</p>
		</description>
		<sheet usage="{{blood dice:amount}}/short or long rest">
			<description>
				<p>As a bonus action, you can use a Blood Die and regain 1d{{blood dice:size}} HP OR when you hit with an attack +1d{{blood dice:size}} damage and the attack counts as magical.</p>
			</description>
		</sheet>
		<rules>
			<stat name="blood dice:amount" value="2" />
			<stat name="blood dice:amount" value="1" level="7" />
			<stat name="blood dice:amount" value="1" level="10" />
			<stat name="blood dice:amount" value="1" level="15" />
			<stat name="blood dice:size" value="6" bonus="size"/>
		</rules>
	</element>

	<element name="Deathseeker" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_DEATHSEEKER">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_DEATHSEEKER</requirements>
		<description>
			<p>Starting at 7th level, you gain advantage on any Wisdom (Perception) or Wisdom (Survival) check used to find a wounded creature.</p>
			<p class="indent">Additionally, as a bonus action on your turn you can sacrifice 1 hit point to learn the general direction of every creature within 100 feet of you that has blood.</p>
		</description>
		<sheet action="bonus action">
			<description>You have advantage on Wis (Perception) or Wis (Survival) checks to find a wounded creature. You can sacrifice 1 HP to learn the general direction of all creatures within 100 feet that have blood.</description>
		</sheet>
	</element>

	<element name="Improved Blood Well" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_IMPROVED_BLOOD_WELL">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_IMPROVED_BLOOD_WELL</requirements>
		<description>
			<p>At 10th level, your blood dice turn into d8s.</p>
		</description>
		<sheet display="false">
			<description>Your blood dice turn into d8s.</description>
		</sheet>
		<rules>
			<stat name="blood dice:size" value="8" level="10" bonus="size"/>
		</rules>
	</element>

	<element name="Blood Rush" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_BLOODRUSH">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_BLOOD_RUSH</requirements>
		<description>
			<p>Starting at 15th level, whenever you cast a hemomancy spell of 1st level or higher, you enter a blood rush. The blood rush lasts until the end of your next turn, and for the duration your speed is doubled, you have advantage on Dexterity saving throws, and you can disengage as a bonus action.</p>
		</description>
		<sheet>
			<description>When you cast a hemomancy spell 1st-Level or higher, for the duration of the spell, your speed is {{blood rush:speed}} feet, you have advantage on Dex saves, and Disengage counts as a bonus action.</description>
		</sheet>
		<rules>
			<stat name="blood rush:speed" value="innate speed"/>
			<stat name="blood rush:speed" value="innate speed"/>
		</rules>
	</element>

	<element name="Strength of the Wounded" type="Archetype Feature" source="Dark Arts Player's Companion" id="ID_JONOMAN3000_DAPC_ARCHETYPE_FEATURE_BLOOD_KNIGHT_STRENGTH_OF_THE_WOUNDED">
		<requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_STRENGTH_OF_THE_WOUNDED</requirements>
		<description>
			<p>At 18th level, you gain increased power when wounded. Whenever you expend a blood die while below half your hit point maximum, you can add your Constitution modifier to the result.</p>
		</description>
		<sheet>
			<description>When below half HP, you can add +{{constitution:modifier}} any time you use a blood die.</description>
		</sheet>
	</element>

	<!--Feature Replacement Grants-->
	<element name="Hemomancy Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_HEMOMANCY" />
	<element name="Blood Well Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_BLOOD_WELL" />
	<element name="Deathseeker Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_DEATHSEEKER" />
	<element name="Improved Blood Well Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_IMPROVED_BLOOD_WELL" />
	<element name="Blood Rush Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_BLOOD_RUSH" />
	<element name="Strength of the Wounded Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_FIGHTER_BLOOD_KNIGHT_STRENGTH_OF_THE_WOUNDED" />
</elements>
